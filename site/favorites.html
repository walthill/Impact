<!DOCTYPE html>
  <html>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">

    <script>
        var fs = require('fs')

        fs.readFile("favorites.txt", "utf8", (err, data) => {
          if (err) throw err;
          favs = document.getElementById("favorites")
          var links = data.split(/,| |\n/)
          for(i = 0; i < links.length - 1; i++) {
            favs.innerHTML += "<li class=\"list-group-item\">"
                            + "<button class=\"btn btn-outline-danger\" "
                            + "onClick=unfavorite(\"" + links[i] + "\")>"
                            + "Unfavorite"
                            + "</button> "
                            + links[i]
                            + "</li>"
          }
        });

        function unfavorite(link) {
            fs.readFile("favorites.txt", "utf8", (err, data) => {
              if (err) throw err;

              var newdata = data.replace(link + '\n', '')
              fs.writeFile('favorites.txt', newdata,
                  (err) => {
                if (err) throw err;
                console.log('The file has been saved!');
              });
            });
            window.location.reload(false);
        }
    </script>

	<head>
        <meta charset="UTF-8">
        <title>Impact</title>
    </head>
    <body>
        <div class="container-fluid">
        <header class="row justify-content-md-center">
            <div class="col-md-2 text-center">
                <img src="../media/logoRedesign.png" alt="Impact Logo" class="img-fluid" style="max-width: 200px;">
            </div>
            <div class="col-md-10 text-center">
                <img src="../media/impactRedesign.png" alt="Impact Logo Lettering" class="img-fluid" style="max-width: 450px;">
            </div>
        </header>
        </div>

        <div class="container-fluid">
            <div class="row bg-light">
                <nav class="col-md-2 bg-dark fixed">
                  <!--Sidebar content-->
                  <ul class="nav nav-pills nav-fill flex-column py-3">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="favorites.html">Favorites</a></li>
                    <li class="nav-item"><a class="nav-link" href="news.html">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="twitch.html">Twitch</a></li>
                    <li class="nav-item"><a class="nav-link" href="">About Us</a></li>

                  </ul>
                </nav>
                <div class="col-md-10 rounded">
                    <ul class="list-group p-3" id="favorites">
                    </ul>
                </div>
            </div>
        </div>

    <footer class="footer">
    </footer>
    </body>
  </html>
